<?xml version='1.0'?>

<mavlink>

      <include>common.xml</include>
      <version>3</version>

      <enums>
           <enum name="MSP_CMD">
              <description>MSP Companion commands</description>
              <entry value="99" name="MSP_CMD_RESTART">
                  <description>Reboot the MSP companion</description>
              </entry>
              <entry value="70" name="MSP_CMD_OFFBOARD">
                  <description>Enable/Disable offboard control</description>
                  <param index="1">enable/disable offboard</param>
              </entry>
              <entry value="71" name="MSP_CMD_VISION">
                  <description>Enable/Disable vision control</description>
                  <param index="1">enable/disable vision</param>
              </entry>
               <entry value="72" name="MSP_CMD_COMBINEDFILESTREAM">
                  <description>Enable/Disable combinedFileStream recording</description>
                  <param index="1">enable/disable Stream recording</param>
              </entry>
              <entry value="73" name="MSP_CMD_OFFBOARD_SETLOCALPOS">
                  <description>Set offboard position via MSP</description>
                  <param index="1">LocalNED.X (set to NAN to ignore)</param>
                  <param index="2">LocalNED.Y (set to NAN to ignore)</param>
                  <param index="3">LocalNED.Z (set to NAN to ignore)</param>
                  <param index="4">Yaw (deg)  (set to NAN to ignore)</param>
              </entry>
            </enum>
            <enum name="MSP_COMPONENT_CTRL">
              <description>Component control</description>
              <entry value="0" name="DISABLE">
                  <description>Disable component</description>
              </entry>
              <entry value="1" name="ENABLE">
                  <description>Enable component</description>
              </entry>
              <entry value="2" name="RESET">
                  <description>reset component</description>
              </entry>
           </enum>
      </enums>


      <messages>
           <message id="180" name="MSP_STATUS">
               <description>MSP Status message.</description>
               <field type="uint8_t"       name="load">CPU load of the companion</field>
               <field type="uint8_t"       name="memory">Memory usage of the companion</field>
               <field type="uint64_t"      name="uptime_ms">Boot time ms</field>
               <field type="uint32_t"      name="com_error">AMA0 communication errors</field>
               <field type="uint32_t"      name="status">MSP Statusflags</field>
               <field type="char[16]"      name="version">MSP software build</field>
               <field type="char[10]"      name="arch">Companion architecture</field>
               <field type="uint64_t"      name="unix_time_us">Unix time us</field>
           </message>

           <message id="181" name="MSP_COMMAND">
               <description>MSP Commands.</description>
               <field type="uint8_t" name="command">Command to be executed by MSP (defined in MSP_COMMANDS)</field>
               <field type="float" name="param1">Parameter 1, as defined by MSP_COMMANDS enum.</field>
               <field type="float" name="param2">Parameter 2, as defined by MSP_COMMANDS enum.</field>
               <field type="float" name="param3">Parameter 3, as defined by MSP_COMMANDS enum.</field>
               <field type="float" name="param4">Parameter 4, as defined by MSP_COMMANDS enum.</field>
               <field type="float" name="param5">Parameter 5, as defined by MSP_COMMANDS enum.</field>
               <field type="float" name="param6">Parameter 6, as defined by MSP_COMMANDS enum.</field>
           </message>

           <message id="182" name="MSP_VISION">
               <description>MSP Vision</description>
               <field type="float"         name="x">X Position</field>
               <field type="float"         name="y">Y Position</field>
               <field type="float"         name="z">Z Position</field>
               <field type="float"         name="vx">X Velocity</field>
               <field type="float"         name="vy">Y Velocity</field>
               <field type="float"         name="vz">Z Velocity</field>
               <field type="float"         name="h">Initial heading</field>
               <field type="float"         name="p">Pitch</field>
               <field type="float"         name="r">Roll</field>
               <field type="uint8_t"       name="quality">Quality of estimation</field>
               <field type="float"         name="fps">FPS of mocap system</field>
               <field type="uint64_t"      name="tms">Timestamp</field>
               <field type="uint32_t"      name="flags">Info flags</field>
               <field type="uint32_t"      name="errors">Error counter</field>
           </message>
           <message id="183" name="MSP_MICRO_SLAM">
               <description>MSP MICRO SLAM Data (12x12x12 each 20cm), encoded in bytes</description>
               <field type="uint8_t[216]" name="data">SLAM data bytes</field>
               <field type="uint64_t"      name="tms">Timestamp</field>
               <field type="uint32_t"      name="flags">Info flags</field>
           </message>
      </messages>
</mavlink>